/************ Update: Schemas ***************/

/* Add Schema: public */
CREATE SCHEMA public;


/************ Add: Sequences ***************/

/* Autogenerated Sequences */

CREATE SEQUENCE "public"."mer_EntradaySalida_ent_id_seq" INCREMENT BY 1;
COMMENT ON SEQUENCE "public"."mer_EntradaySalida_ent_id_seq" IS 'DbWrench Autogenerated Sequence.';

CREATE SEQUENCE public.mer_persona_per_id_seq INCREMENT BY 1;
COMMENT ON SEQUENCE public.mer_persona_per_id_seq IS 'DbWrench Autogenerated Sequence.';

CREATE SEQUENCE public.mer_rol_rol_id_seq INCREMENT BY 1;
COMMENT ON SEQUENCE public.mer_rol_rol_id_seq IS 'DbWrench Autogenerated Sequence.';

CREATE SEQUENCE public.mer_usuario_usu_id_seq INCREMENT BY 1;
COMMENT ON SEQUENCE public.mer_usuario_usu_id_seq IS 'DbWrench Autogenerated Sequence.';




/************ Update: Tables ***************/

/******************** Add Table: "public"."mer_EntradaySalida" ************************/

/* Build Table Structure */
CREATE TABLE "public"."mer_EntradaySalida"
(
	ent_id INTEGER DEFAULT nextval('public."mer_EntradaySalida_ent_id_seq"'::regclass) NOT NULL,
	ent_horaentrada TIMESTAMP NOT NULL,
	ent_horasalalmuerzo TIMESTAMP NOT NULL,
	ent_horaentalmuerzo TIMESTAMP NOT NULL,
	ent_horasalida TIMESTAMP NOT NULL,
	per_id INTEGER NOT NULL
);

/* Add Primary Key */
ALTER TABLE "public"."mer_EntradaySalida" ADD CONSTRAINT "pkmer_EntradaySalida"
	PRIMARY KEY (ent_id);

/* Add Indexes */
CREATE INDEX "mer_EntradaySalida_Id_Persona_Idx" ON "public"."mer_EntradaySalida" (per_id);


/******************** Add Table: public.mer_persona ************************/

/* Build Table Structure */
CREATE TABLE public.mer_persona
(
	per_id INTEGER DEFAULT nextval('public.mer_persona_per_id_seq'::regclass) NOT NULL,
	per_cedula BIGINT NOT NULL,
	per_nombres VARCHAR(60) NOT NULL,
	per_apellidos VARCHAR(60) NOT NULL,
	per_genero VARCHAR(1) NOT NULL,
	per_fenacimiento DATE NOT NULL,
	per_edad INTEGER NOT NULL,
	per_lugarnacimiento VARCHAR(50) NOT NULL,
	per_nacionalidad VARCHAR(50) NOT NULL,
	per_lugarresidencia VARCHAR(60) NOT NULL,
	per_direccionresidencia VARCHAR(60) NOT NULL,
	per_notelefono INTEGER NOT NULL,
	per_correo VARCHAR(100) NOT NULL,
	per_fecingresoempresa DATE NOT NULL,
	per_antiguedad INTEGER NOT NULL,
	per_cargo VARCHAR(100) NOT NULL,
	per_centrotrabajo VARCHAR(30) NOT NULL,
	per_area VARCHAR(30) NOT NULL,
	per_turno VARCHAR(20) NOT NULL,
	per_salario FLOAT NOT NULL,
	per_tipovinculacion VARCHAR(40) NOT NULL,
	per_arl INTEGER NOT NULL,
	per_eps VARCHAR(50) NOT NULL,
	per_afp VARCHAR(30) NOT NULL,
	per_escolaridad VARCHAR(50) NOT NULL,
	per_profesion VARCHAR(50) NOT NULL,
	per_estadocivi VARCHAR(15) NOT NULL,
	per_raza VARCHAR(30) NOT NULL,
	per_nohijos INTEGER NOT NULL,
	per_otrasperacargo INTEGER NOT NULL,
	per_estratosocial INTEGER NOT NULL,
	per_conseninformado VARCHAR(100) NOT NULL
);

/* Add Primary Key */
ALTER TABLE public.mer_persona ADD CONSTRAINT pkmer_persona
	PRIMARY KEY (per_id);

/* Add Indexes */
CREATE UNIQUE INDEX "mer_persona_Cedula_Persona_Idx" ON public.mer_persona (per_cedula);


/******************** Add Table: public.mer_rol ************************/

/* Build Table Structure */
CREATE TABLE public.mer_rol
(
	rol_id INTEGER DEFAULT nextval('public.mer_rol_rol_id_seq'::regclass) NOT NULL,
	rol_nombre VARCHAR NOT NULL
);

/* Add Primary Key */
ALTER TABLE public.mer_rol ADD CONSTRAINT pkmer_rol
	PRIMARY KEY (rol_id);


/******************** Add Table: public.mer_usuario ************************/

/* Build Table Structure */
CREATE TABLE public.mer_usuario
(
	usu_id INTEGER DEFAULT nextval('public.mer_usuario_usu_id_seq'::regclass) NOT NULL,
	usu_cedula INTEGER NOT NULL,
	usu_nombres VARCHAR(60) NOT NULL,
	usu_apellidos VARCHAR(60) NOT NULL,
	usu_telefono INTEGER NOT NULL,
	usu_alias VARCHAR(30) NOT NULL,
	usu_contrasena VARCHAR(32) NOT NULL,
	usu_correo VARCHAR(100) NOT NULL,
	rol_id INTEGER NOT NULL
);

/* Add Primary Key */
ALTER TABLE public.mer_usuario ADD CONSTRAINT pkmer_usuario
	PRIMARY KEY (usu_id);

/* Add Indexes */
CREATE INDEX "mer_usuario_Id_Rol_Idx" ON public.mer_usuario (rol_id);





/************ Add Foreign Keys ***************/

/* Add Foreign Key: fk_EntradaySalida_NuevaPersona */
ALTER TABLE "public"."mer_EntradaySalida" ADD CONSTRAINT "fk_EntradaySalida_NuevaPersona"
	FOREIGN KEY (per_id) REFERENCES public.mer_persona (per_id)
	ON UPDATE RESTRICT ON DELETE RESTRICT;

/* Add Foreign Key: fk_NuevoUsuario_Rol */
ALTER TABLE public.mer_usuario ADD CONSTRAINT "fk_NuevoUsuario_Rol"
	FOREIGN KEY (rol_id) REFERENCES public.mer_rol (rol_id)
	ON UPDATE RESTRICT ON DELETE RESTRICT;